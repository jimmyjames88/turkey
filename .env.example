# ============================================
# Turkey Authentication Server Configuration
# ============================================

# Environment Configuration
NODE_ENV=development
PORT=3000

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=postgresql://username:password@localhost:5432/turkey_dev

# Connection Pool Settings (optional)
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=2
DB_ACQUIRE_TIMEOUT_MS=30000
DB_IDLE_TIMEOUT_MS=300000
DB_CONNECTION_TIMEOUT_MS=10000
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY_MS=1000

# ============================================
# JWT Configuration
# ============================================
JWT_ISSUER=https://auth.example.com
JWT_AUDIENCE=default-app
JWT_ALGORITHM=ES256
ACCESS_TOKEN_TTL=900
REFRESH_TOKEN_TTL=7776000

# Optional: Specify key ID for rotation
# JWT_KEY_ID=

# ============================================
# Security Configuration
# ============================================
BCRYPT_ROUNDS=12

# CORS Origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Trust proxy (for rate limiting behind load balancer)
# TRUST_PROXY=true

# ============================================
# Rate Limiting
# ============================================
# Login Rate Limit
LOGIN_RATE_LIMIT_WINDOW_MS=900000
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=5

# Refresh Token Rate Limit
REFRESH_RATE_LIMIT_WINDOW_MS=60000
REFRESH_RATE_LIMIT_MAX_ATTEMPTS=10

# General API Rate Limit
GENERAL_RATE_LIMIT_WINDOW_MS=900000
GENERAL_RATE_LIMIT_MAX_ATTEMPTS=100

# ============================================
# Key Management
# ============================================
KEY_ROTATION_SCHEDULE=0 0 * * 0
JWKS_CACHE_TTL=900000
KEY_STORAGE_PATH=./keys

# Optional: Encryption key for stored private keys
# KEY_ENCRYPTION_SECRET=your-encryption-key-here

# ============================================
# Email Configuration
# ============================================
# Email service: 'mailgun' | 'smtp' | leave empty to disable
EMAIL_SERVICE=

# Email sender configuration
EMAIL_FROM=noreply@example.com
EMAIL_FROM_NAME=Turkey Auth

# Token TTLs (seconds)
PASSWORD_RESET_TOKEN_TTL=3600
EMAIL_VERIFICATION_TOKEN_TTL=172800

# Require email verification for new accounts
REQUIRE_EMAIL_VERIFICATION=false

# Mailgun Configuration (if EMAIL_SERVICE=mailgun)
MAILGUN_API_KEY=
MAILGUN_DOMAIN=

# SMTP Configuration (if EMAIL_SERVICE=smtp)
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=

# ============================================
# Cleanup Jobs
# ============================================
# Run expired JTI cleanup every N hours (default: 24)
CLEANUP_INTERVAL_HOURS=24

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=debug
LOG_FORMAT=pretty

# Log destinations (optional)
# LOG_CONSOLE=true
# LOG_FILE=/var/log/turkey/app.log
# LOG_SYSLOG=

# ============================================
# Health Check Configuration
# ============================================
HEALTH_CHECK_TIMEOUT=5000
DB_HEALTH_CHECK=true

# ============================================
# Graceful Shutdown
# ============================================
SHUTDOWN_TIMEOUT=10000